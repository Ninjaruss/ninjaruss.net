---
interface Thumbnail {
  src: string;
  alt?: string;
}

interface Props {
  thumbnails?: Thumbnail[];
}

const { thumbnails = [] } = Astro.props;
---

{thumbnails.length > 0 && (
  <aside class="thumbnail-gallery">
    <div class="thumbnail-gallery__inner">
      {thumbnails.map((thumb, index) => (
        <figure class="thumbnail-gallery__item" style={`--stagger-delay: ${index * 100}ms`}>
          <img
            src={thumb.src}
            alt={thumb.alt || 'Thumbnail'}
            loading="lazy"
            class="thumbnail-gallery__img"
          />
        </figure>
      ))}
    </div>
  </aside>
)}

<style is:global>
  /* Thumbnail gallery styles - compact grid of small preview images */
  .thumbnail-gallery {
    position: sticky;
    top: var(--space-xl);
    align-self: start;
  }

  .thumbnail-gallery__inner {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-sm);
  }

  .thumbnail-gallery__item {
    aspect-ratio: 1;
    background: var(--color-bg-elevated);
    border: var(--border-medium) solid var(--color-border-strong);
    border-radius: var(--radius-sm);
    overflow: hidden;
    margin: 0;
    cursor: pointer;
    transition:
      transform var(--transition-fast),
      border-color var(--transition-fast),
      box-shadow var(--transition-fast);
  }

  .thumbnail-gallery__item:hover {
    transform: scale(1.05);
    border-color: var(--color-gold);
    box-shadow: var(--shadow-hard);
  }

  .thumbnail-gallery__img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  /* Single thumbnail takes full width */
  .thumbnail-gallery__inner:has(.thumbnail-gallery__item:only-child) {
    grid-template-columns: 1fr;
  }

  .thumbnail-gallery__item:only-child {
    aspect-ratio: 16/10;
  }

  @media (max-width: 1200px) {
    .thumbnail-gallery {
      position: relative;
      top: 0;
    }

    .thumbnail-gallery__inner {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  @media (max-width: 768px) {
    .thumbnail-gallery__inner {
      grid-template-columns: repeat(3, 1fr);
    }
  }
</style>
