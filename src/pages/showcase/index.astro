---
import { getCollection } from 'astro:content';
import SplitViewLayout from '../../layouts/SplitViewLayout.astro';
import ListItem from '../../components/ListItem.astro';
import { hasMinimalContent } from '../../utils/content';

const allExperiments = await getCollection('showcase', ({ data }) => !data.draft);
const sortedExperiments = allExperiments.sort((a, b) =>
  new Date(b.data.publishedAt || 0).getTime() - new Date(a.data.publishedAt || 0).getTime()
);
---

<SplitViewLayout
  title="Showcase"
  description="Projects framed as inquiries."
  section="showcase"
>
  <Fragment slot="list">
    {sortedExperiments.length > 0 ? (
    sortedExperiments.map((entry) => (
      <ListItem
        href={`/showcase/${entry.slug}`}
        slug={entry.slug}
        title={entry.data.title}
        tags={entry.data.tags}
        hasMinimalContent={hasMinimalContent(entry.body)}
      />
    ))
  ) : (
    <p class="empty-state">No showcase yet.</p>
  )}
  </Fragment>
</SplitViewLayout>

<style>
  .empty-state {
    color: var(--color-muted);
    font-style: italic;
    text-align: center;
    padding: var(--space-xl);
  }
</style>
