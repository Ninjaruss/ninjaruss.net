---
import { getCollection } from 'astro:content';
import SplitViewLayout from '../../layouts/SplitViewLayout.astro';
import ListItem from '../../components/ListItem.astro';

const allMusic = await getCollection('music', ({ data }) => !data.draft);
const sortedMusic = allMusic.sort((a, b) => a.data.title.localeCompare(b.data.title));
---

<SplitViewLayout
  title="Music"
  description="Curated song collections."
  subtitle="Sorted by mood or internal logic."
  section="music"
>
  <Fragment slot="list">
    {sortedMusic.length > 0 ? (
      sortedMusic.map((entry) => (
        <ListItem
          href={`/music/${entry.slug}`}
          slug={entry.slug}
          title={entry.data.title}
          subtitle={entry.data.mood}
          status={entry.data.status}
        />
      ))
    ) : (
      <p class="empty-state">No music collections yet.</p>
    )}
  </Fragment>
</SplitViewLayout>

<style>
  .empty-state {
    color: var(--color-muted);
    font-style: italic;
    text-align: center;
    padding: var(--space-xl);
  }
</style>
